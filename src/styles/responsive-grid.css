/* Fluid Responsive Layout System inspired by modern CSS Grid */

:root {
  /* Fluid spacing that scales with viewport */
  --fluid-spacing-xs: clamp(0.25rem, 1vw, 0.5rem);
  --fluid-spacing-sm: clamp(0.5rem, 2vw, 1rem);
  --fluid-spacing-md: clamp(1rem, 3vw, 1.5rem);
  --fluid-spacing-lg: clamp(1.5rem, 4vw, 2rem);
  --fluid-spacing-xl: clamp(2rem, 5vw, 3rem);
  --fluid-spacing-2xl: clamp(3rem, 6vw, 4rem);
  --fluid-spacing-3xl: clamp(4rem, 8vw, 6rem);
  
  /* Fluid typography */
  --fluid-text-xs: clamp(0.75rem, 1.5vw, 0.875rem);
  --fluid-text-sm: clamp(0.875rem, 2vw, 1rem);
  --fluid-text-base: clamp(1rem, 2.5vw, 1.125rem);
  --fluid-text-lg: clamp(1.125rem, 3vw, 1.25rem);
  --fluid-text-xl: clamp(1.25rem, 3.5vw, 1.5rem);
  --fluid-text-2xl: clamp(1.5rem, 4vw, 2rem);
  --fluid-text-3xl: clamp(1.875rem, 5vw, 2.5rem);
  --fluid-text-4xl: clamp(2.25rem, 6vw, 3rem);
  --fluid-text-5xl: clamp(3rem, 8vw, 4rem);
  
  /* Fluid container widths */
  --container-xs: 100%;
  --container-sm: min(100%, 640px);
  --container-md: min(100%, 768px);
  --container-lg: min(100%, 1024px);
  --container-xl: min(100%, 1280px);
  --container-2xl: min(100%, 1536px);
  
  /* Grid gaps that scale */
  --grid-gap: clamp(1rem, 3vw, 2rem);
}

/* Fluid Container */
.fluid-container {
  width: 100%;
  max-width: var(--container-2xl);
  margin-inline: auto;
  padding-inline: var(--fluid-spacing-lg);
}

/* Responsive Grid System */
.fluid-grid {
  display: grid;
  gap: var(--grid-gap);
  grid-template-columns: repeat(auto-fit, minmax(min(100%, 300px), 1fr));
}

/* Specific grid variants */
.fluid-grid-2 {
  grid-template-columns: repeat(auto-fit, minmax(min(100%, 400px), 1fr));
}

.fluid-grid-3 {
  grid-template-columns: repeat(auto-fit, minmax(min(100%, 280px), 1fr));
}

.fluid-grid-4 {
  grid-template-columns: repeat(auto-fit, minmax(min(100%, 220px), 1fr));
}

/* Flexbox fluid layouts */
.fluid-flex {
  display: flex;
  gap: var(--fluid-spacing-md);
  flex-wrap: wrap;
}

.fluid-flex > * {
  flex: 1 1 300px;
}

/* Section spacing that breathes */
.fluid-section {
  padding-block: var(--fluid-spacing-3xl);
  padding-inline: var(--fluid-spacing-lg);
}

/* Cards/Boxes that scale nicely */
.fluid-card {
  padding: var(--fluid-spacing-lg);
  border-radius: clamp(0.5rem, 1vw, 1rem);
  width: 100%;
  container-type: inline-size;
}

/* Text content that scales */
.fluid-text {
  font-size: var(--fluid-text-base);
  line-height: 1.6;
  max-width: 65ch;
}

.fluid-heading-1 {
  font-size: var(--fluid-text-4xl);
  line-height: 1.1;
  font-weight: 300;
}

.fluid-heading-2 {
  font-size: var(--fluid-text-3xl);
  line-height: 1.2;
  font-weight: 300;
}

.fluid-heading-3 {
  font-size: var(--fluid-text-2xl);
  line-height: 1.3;
  font-weight: 400;
}

/* Images that scale and maintain aspect ratio */
.fluid-image {
  width: 100%;
  height: auto;
  display: block;
  object-fit: cover;
  aspect-ratio: var(--aspect, 16/9);
}

.fluid-image--square {
  --aspect: 1/1;
}

.fluid-image--portrait {
  --aspect: 3/4;
}

/* Responsive spacing utilities */
.mt-fluid-sm { margin-top: var(--fluid-spacing-sm); }
.mt-fluid-md { margin-top: var(--fluid-spacing-md); }
.mt-fluid-lg { margin-top: var(--fluid-spacing-lg); }
.mt-fluid-xl { margin-top: var(--fluid-spacing-xl); }

.mb-fluid-sm { margin-bottom: var(--fluid-spacing-sm); }
.mb-fluid-md { margin-bottom: var(--fluid-spacing-md); }
.mb-fluid-lg { margin-bottom: var(--fluid-spacing-lg); }
.mb-fluid-xl { margin-bottom: var(--fluid-spacing-xl); }

.p-fluid-sm { padding: var(--fluid-spacing-sm); }
.p-fluid-md { padding: var(--fluid-spacing-md); }
.p-fluid-lg { padding: var(--fluid-spacing-lg); }
.p-fluid-xl { padding: var(--fluid-spacing-xl); }

/* Container queries for truly responsive components */
@container (min-width: 768px) {
  .fluid-card {
    padding: var(--fluid-spacing-xl);
  }
}

/* Smooth transitions for all resizing */
* {
  transition: padding 0.3s ease, margin 0.3s ease, font-size 0.3s ease;
}

/* Remove transitions on window resize to prevent jank */
.no-transition,
.no-transition * {
  transition: none !important;
}

/* Aspect ratio boxes that scale */
.aspect-box {
  position: relative;
  width: 100%;
}

.aspect-box::before {
  content: "";
  display: block;
  padding-bottom: var(--aspect-ratio, 56.25%); /* 16:9 default */
}

.aspect-box > * {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

/* Responsive breakpoints without hard cuts */
@media (min-width: 640px) {
  :root {
    --grid-gap: clamp(1.5rem, 4vw, 2.5rem);
  }
}

@media (min-width: 1024px) {
  :root {
    --grid-gap: clamp(2rem, 5vw, 3rem);
  }
}

/* Print styles */
@media print {
  .fluid-section {
    padding: 1rem;
  }
  
  .fluid-grid {
    grid-template-columns: 1fr;
  }
}